## 3.2 DMVPN 

### 3.2.a Troubleshoot DMVPN Phase 3 with dual-hub
#### 3.2.a i NHRP
#### 3.2.a ii IPsec/IKEv2 using pre-shared key
#### 3.2.a iii Per-Tunnel QoS

* Per-site shaper per tunnel 
* Have the spoke signal the hub which QoS policy to apply toward it 
* spoke config `spoke01(config-if) nhrp group spoke-10Mbps`
* hub config: 

```
policy-map spoke-10Mbps-parent 
  class class-default
    shape average 50000000
    service-policy child-policy
policy-map spoke-10Mbps-parent 
  class class-default
    shape average 50000000
    service-policy child-policy    
policy-map child-policy
  ! all your normal QoS stuff 
  
int tun0 
  ip nhrp group map group spoke-10Mbps service-policy output spoke-10Mbps-parent
  ip nhrp group map group spoke-50Mbps service-policy output spoke-50Mbps-parent
```

### 3.2.b Identify use-cases for FlexVPN
#### 3.2.b i Site-to-site, Server, Client, Spoke-to-Spoke
#### 3.2.b ii IPsec/IKEv2 using pre-shared key
#### 3.2.b iii MPLS over FlexVPN
